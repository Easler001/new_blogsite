<!DOCTYPE html>
<html
  dir="ltr"
  lang="en"
  data-theme=""
><head>
  <title>
    Easler
      |
      é›†è¨ˆå‡¦ç†ã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ 


    

  </title>

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.86.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta
    name="description"
    content="
      Call me Easler


    "
  />
  
  
  
  <link
    rel="stylesheet"
    href="/css/main.min.c580433fbb275c2c40c362871f45832502b837fa4f6b86f80089b4b4baf9df86.css"
    integrity="sha256-xYBDP7snXCxAw2KHH0WDJQK4N/pPa4b4AIm0tLr534Y="
    crossorigin="anonymous"
    type="text/css"
  />
  
  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.8e4c8f0a940b1596fb4c64d28a00a5ceed671fc303cb65178b4947417da9c674.css"
    integrity="sha256-jkyPCpQLFZb7TGTSigClzu1nH8MDy2UXi0lHQX2pxnQ="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
    crossorigin="anonymous"
  />
  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />

  <link rel="canonical" href="/posts/node.js-1/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.2a2cd9614b7d007dfbb75e8da19e3a0fa872ceab53c6d000c00b7a0c89b85bfc.js"
    integrity="sha256-KizZYUt9AH37t16NoZ46D6hyzqtTxtAAwAt6DIm4W/w="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.7fd87181cdd7e8413aa64b6867bb32f3a8dc242e684fc7d5bbb9f600dbc2b6eb.js"
      integrity="sha256-f9hxgc3X6EE6pktoZ7sy86jcJC5oT8fVu7n2ANvCtus="
      crossorigin="anonymous"
    ></script>

  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="é›†è¨ˆå‡¦ç†ã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ "/>
<meta name="twitter:description" content="é›†è¨ˆå‡¦ç†ã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ  é›†è¨ˆã¯æ–‡å­—é€šã‚Šæ•°ã‚’é›†ã‚ã¦åˆç®—ã™ã‚‹ã“ã¨"/>



  


  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "posts",
        "name": "é›†è¨ˆå‡¦ç†ã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ ",
        "headline": "é›†è¨ˆå‡¦ç†ã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ ",
        "alternativeHeadline": "",
        "description": "
      
        é›†è¨ˆå‡¦ç†ã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ  é›†è¨ˆã¯æ–‡å­—é€šã‚Šæ•°ã‚’é›†ã‚ã¦åˆç®—ã™ã‚‹ã“ã¨


      


    ",
        "inLanguage": "ja-ja",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "\/posts\/node.js-1\/"
        },
        "author" : {
            "@type": "Person",
            "name": "Easler"
        },
        "creator" : {
            "@type": "Person",
            "name": "Easler"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "Easler"
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "Easler"
        },
        "copyrightYear" : "2021",
        "dateCreated": "2021-10-23T12:04:55.00Z",
        "datePublished": "2021-10-23T12:04:55.00Z",
        "dateModified": "2021-10-23T12:04:55.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "Easler",
            "url": "",
            "logo": {
                "@type": "ImageObject",
                "url": "favicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
      ]

    ,
        "url" : "\/posts\/node.js-1\/",
        "wordCount" : "742",
        "genre" : [ ],
        "keywords" : [ ]
    }
  </script>



</head>
<body>
    <header><div
  class="page-top 
    animated fadeInDown

  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
  </a>
  <nav>
    <ul class="nav__list" id="navMenu">
      <div class="nav__links">
        
        
          
          <li>
            <a
              
              href="/"
              
              title=""
              >Home</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/posts/"
              
              title=""
              >Posts</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/about/"
              
              title=""
              >About</a
            >
          </li>

        
        
      </div>
      <li>
        
          <a class="theme-switch" title="Switch Theme">
            <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
          </a>

        
      </li>
    </ul>
  </nav>
</div>
</header>
    <div class="wrapper">
      <aside><div
  class="sidebar
    animated fadeInDown

  "
>
  <div class="sidebar__content">
    <div class="logo-title">
      <div class="title">
        <img src="/images/p.jpg" alt="profile picture" />
        <h3 title=""><a href="/">30Week</a></h3>
        <div class="description">
          <p>Call me Easler</p>
        </div>
      </div>
    </div>
    <ul class="social-links">
      
    </ul>
  </div><footer class="footer footer--sidebar">
  <div class="by_farbox">
    <ul class="footer__list">
      <li class="footer__item">
        &copy;
        
          2020-2021

        
      </li>
      
    </ul>
  </div>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.71100d84fab0ad794b8399a66ac810700cc78d703f715dc10af4d7ba7b761362.js"
    integrity="sha256-cRANhPqwrXlLg5mmasgQcAzHjXA/cV3BCvTXunt2E2I="
    crossorigin="anonymous"
  ></script></div>
</aside>
      <main>
        <div class="autopagerize_page_element">
          <div class="content">
  <div
    class="post 
      animated fadeInDown

    "
  >
    <div class="post-content">
      
      <div class="post-title">
        <h1>é›†è¨ˆå‡¦ç†ã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ </h1>
        
      </div><h2 id="é›†è¨ˆå‡¦ç†ã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ ">é›†è¨ˆå‡¦ç†ã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ </h2>
<p>é›†è¨ˆã¯æ–‡å­—é€šã‚Šæ•°ã‚’é›†ã‚ã¦åˆç®—ã™ã‚‹ã“ã¨<br>
ã“ã“ã§ã¯Nodeã«ã¦åˆç®—ã™ã‚‹ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã«ã¤ã„ã¦ã¾ã¨ã‚ã‚‹</p>
<p>ä¸€ä¾‹ã¨ã—ã¦å„éƒ½é“åºœçœŒã®äººå£å¢—æ¸›ç‡ã«ã¤ã„ã¦å‡¦ç†ã‚’ã—ã¦ã¿ã‚‹</p>
<h3 id="ã¾ãšã¯å°å…¥ã‹ã‚‰">ã¾ãšã¯å°å…¥ã‹ã‚‰</h3>
<p>â€»å‰æã¨ã—ã¦workspaceã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¦ã„ã‚‹<br>
<code>cd ~/workspace/</code><br>
<code>git clone git@github.com:ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å/adding-up.git</code><br>
<code>cd adding-up</code><br>
<code>git checkout main-2021</code><br>
<code>code .</code><br>
<code>docker-compose up -d</code><br>
<code>docker-compose exec app bash</code><br>
ä¸Šè¨˜ã®<code>code .</code> ã§VS codeãŒèµ·å‹•ã™ã‚‹ã€‚<br>
ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã«ã¯</p>
<blockquote>
<p>app.js (å®Ÿè£…ã™ã‚‹JSã®ãƒ•ã‚¡ã‚¤ãƒ«)<br>
popu-pref.csv äººå£æ¨ç§»ã«ã¤ã„ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ã¦ã‚‹<br>
Dockerfile ã¨ docker-compose.yml  ã“ã‚Œã¯ã“ã‚Œã¾ã§åŒæ§˜ã€€è©³ç´°ã¯<!-- raw HTML omitted --><a href="https://nostalgic-noyce-f50430.netlify.app/posts/node.js/">https://nostalgic-noyce-f50430.netlify.app/posts/node.js/</a><!-- raw HTML omitted --></p>
</blockquote>
<h4 id="ã‚³ãƒ¼ãƒ‰ã®è£œè¶³">ã‚³ãƒ¼ãƒ‰ã®è£œè¶³</h4>
<p>git checkoutç­‰ã«ã¤ã„ã¦ã€€è©³ç´°ã¯æœ¬è¨˜äº‹å…¨ä½“æ§‹æˆå®Œäº†å¾Œã«è¿½è¨˜ã€‚</p>
<h2 id="ä»Šå›ã™ã‚‹ã‚³ãƒˆ">ä»Šå›ã™ã‚‹ã‚³ãƒˆ</h2>
<p>ãƒ‡ãƒ¼ã‚¿å…ƒã«ãªã‚‹CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰2010å¹´ã‹ã‚‰2015å¹´ã«ã‹ã‘ã¦ã®äººå£å¢—æ¸›ç‡ã«ã¤ã„ã¦ãƒ©ãƒ³ã‚­ãƒ³ã‚°ä½œæˆã‚’ã‚„ã£ã¦ã¿ã‚‹<br>
å§‹ã‚ã‚‹ã«ã‚ãŸã£ã¦ã€ã„ãã¤ã‹ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’é †åºç«‹ã¦ã¦ã‚„ã£ã¦ã„ãã€‚</p>
<blockquote>
<p>â‘ ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿<br>
â‘¡2010å¹´ã¨2015å¹´ã§ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†ã‘ã‚‹<br>
â‘¢å¤‰åŒ–ç‡ã‚’è¨ˆç®—ã•ã›ã‚‹<br>
â‘£å¤‰åŒ–ç‡ã§ä¸¦ã¹ã¦ãã‚Œã‚’å®Ÿéš›ã«è¡¨ç¤ºã•ã›ã‚‹ã€‚</p>
</blockquote>
<p>ã‚¤ãƒ¡ãƒ¼ã‚¸çš„ã«ã¯</p>
<blockquote>
<ol>
<li>â—¯â—¯çœŒã€€?%</li>
<li>â—¯â—¯çœŒã€€?% â€¦<br>
ã¨ãªã‚Œã°ã„ã„ãŒçµæœã¯ã©ã†ãªã‚‹ã‹ãªâ€¦?</li>
</ol>
</blockquote>
<p>ã¾ãšã¯app.jsã®ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã•ã›ã‚‹</p>
<pre><code class="language-java:'use" data-lang="java:'use">const fs = require('fs');
const readline = require('readline');
const rs = fs.createReadStream('./popu-pref.csv');
const rl = readline.createInterface({ input: rs, output: {} });
rl.on('line', lineString =&gt; {
  console.log(lineString);
});
</code></pre><p>ã“ã®ä¸­ã§ã€</p>
<pre><code class="language-java:" data-lang="java:">const rs = fs.createReadStream('./popu-pref.csv');
const rl = readline.createInterface({ input: rs, output: {} });  
</code></pre><p>ã“ã®éƒ¨åˆ†ã¯å®Ÿéš›ã«æ›¸ã‹ã‚Œã¦ã‚‹ã‚ˆã†ã«csvãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¾ã›ã¦ã„ã‚‹<br>
<strong>ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­è¾¼ã‚’è¡Œã†Streamã‚’ç”Ÿæˆã™ã‚‹</strong></p>
<h4 id="stream">Stream</h4>
<blockquote>
<p>Node.jsã§å…¥å‡ºåŠ›ãŒèµ·ãã‚‹å‡¦ç†ã®ã»ã¨ã‚“ã©ãŒã“ã‚Œã€‚<br>
æ–‡å­—é€šã‚Šã€Œæµã‚Œã€ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚ã“ã“ã§ã¯ã€csvãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ™ãƒ³ãƒˆã«åå¿œã—ã¦æƒ…å ±ã‚’è¿”ã™å½¢ã€‚<br>
ã“ã®ã‚ˆã†ã«äºˆã‚ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸæ™‚ã«å®Ÿè¡Œã™ã‚‹é–¢æ•°ã‚’è¨­å®šã—ã¦èµ·ããŸã‚¤ãƒ™ãƒ³ãƒˆã«å¿œã˜ã¦å‡¦ç†ã™ã‚‹ä¸€é€£ã®æµã‚Œã‚’  <strong>ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨ã„ã†ã€‚</strong></p>
</blockquote>
<p><strong>ã¨ã‚Šã‚ãˆãšã“ã“ã§ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã—ã¦ã¿ã‚ˆã†</strong></p>
<pre><code class="language-java:" data-lang="java:">node app.js  
</code></pre><pre><code class="language-java:" data-lang="java:">é›†è¨ˆå¹´,éƒ½é“åºœçœŒå,10ã€œ14æ­³ã®äººå£,15ã€œ19æ­³ã®äººå£  
2010,åŒ—æµ·é“,237155,258530  
2010,é’æ£®çœŒ,66023,67308  
2010,å²©æ‰‹çœŒ,62587,64637  
2010,å®®åŸçœŒ,109287,120010  
2010,ç§‹ç”°çœŒ,47425,47154  
2010,å±±å½¢çœŒ,54968,54898  
2010,ç¦å³¶çœŒ,101697,101390  
2010,èŒ¨åŸçœŒ,143298,144480  
2010,æ ƒæœ¨çœŒ,94321,93535  
2010,ç¾¤é¦¬çœŒ,99068,96344  
2010,åŸ¼ç‰çœŒ,334605,356249  
2010,åƒè‘‰çœŒ,276043,283408  
2010,æ±äº¬éƒ½,492799,546573  
ï¼ˆçœç•¥ï¼‰  
</code></pre><p>â‘ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã€€ã‚¯ãƒªã‚¢<br>
ç¶šã„ã¦ãƒ‡ãƒ¼ã‚¿ã®é¸æŠ(æŠ½å‡º)ã‚’è¡Œã†<br>
app.jsã‚’ä»¥ä¸‹ã®é€šã‚Šæ›¸ãæ›ãˆã‚’ã—ã¦ã¿ã‚‹</p>
<pre><code class="language-java:" data-lang="java:"> const rl = readline.createInterface({ input: rs, output: {} });
 rl.on('line', lineString =&gt; {
-  console.log(lineString);
+  const columns = lineString.split(',');
+  const year = parseInt(columns[0]);
+  const prefecture = columns[1];
+  const popu = parseInt(columns[3]);
+  if (year === 2010 || year === 2015) {
+    console.log(year);
+    console.log(prefecture);
+    console.log(popu);
+  }
 });  
</code></pre><p>(ï¼‹ãŒè¿½åŠ ã€âˆ’ãŒå‰Šé™¤)</p>
<p>ã“ã“ã§å†åº¦</p>
<pre><code class="language-java:" data-lang="java:">node app.js  
</code></pre><p>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèª</p>
<pre><code class="language-java:" data-lang="java:">2010  
åŒ—æµ·é“  
258530  
2010  
é’æ£®çœŒ  
67308  
2010  
å²©æ‰‹çœŒ  
64637  
2010  
å®®åŸçœŒ  
120010  
2010  
ç§‹ç”°çœŒ  
47154  
ï¼ˆçœç•¥ï¼‰  
</code></pre><p>ã“ã‚Œã§2010å¹´ã¨2015å¹´ã§ãƒ‡ãƒ¼ã‚¿åˆ†ã‘ãŒã§ããŸ<br>
ã“ã“ã‹ã‚‰ã¯ãƒ‡ãƒ¼ã‚¿ã®è¨ˆç®—ã‚’ã™ã‚‹<br>
äººå£å¢—æ¸›ç‡ã‚’å‡ºã™ã«ã¯</p>
<blockquote>
<p><strong>{(2015ã®äººå£Ã·2010ã®äººå£)-1}Ã—100</strong></p>
</blockquote>
<p>ã§å¢—æ¸›ç‡ã‚’ï¼…å˜ä½ã§å‡ºã›ã‚‹ã¯ãšã ãŒæœãŸã—ã¦â€¦?<br>
ã¨ã‚Šã‚ãˆãšã“ã“ã§ã¯å¢—åŠ ç‡ã«ã¤ã„ã¦å‡ºã—ã¦ã¿ã‚‹<br>
ã“ã“ã§å†ã³app.jsãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãæ›ãˆã¦ã¿ã‚ˆã†</p>
<pre><code class="language-java:" data-lang="java:"> 'use strict';
 const fs = require('fs');
 const readline = require('readline');
 const rs = fs.createReadStream('./popu-pref.csv');
 const rl = readline.createInterface({ input: rs, output: {} });
+const prefectureDataMap = new Map(); // key: éƒ½é“åºœçœŒ value: é›†è¨ˆãƒ‡ãƒ¼ã‚¿ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 rl.on('line', lineString =&gt; {
   const columns = lineString.split(',');
   const year = parseInt(columns[0]);
   const prefecture = columns[1];
   const popu = parseInt(columns[3]);
   if (year === 2010 || year === 2015) {
-    console.log(year);
-    console.log(prefecture);
-    console.log(popu);
+    let value = prefectureDataMap.get(prefecture);
+    if (!value) {
+      value = {
+        popu10: 0,
+        popu15: 0,
+        change: null
+      };
+    }
+    if (year === 2010) {
+      value.popu10 = popu;
+    }
+    if (year === 2015) {
+      value.popu15 = popu;
+    }
+    prefectureDataMap.set(prefecture, value);
   }
 });
+rl.on('close', () =&gt; {
+  console.log(prefectureDataMap);
+});  
</code></pre><p>(ï¼‹ãŒè¿½åŠ ã€âˆ’ãŒå‰Šé™¤)</p>
<p>ã“ã®çŠ¶æ…‹ã§</p>
<pre><code class="language-java:" data-lang="java:">node app.js  
</code></pre><p>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèª</p>
<pre><code class="language-java:" data-lang="java:">Map {
  'åŒ—æµ·é“' =&gt; { popu10: 258530, popu15: 236840, change: null },
  'é’æ£®çœŒ' =&gt; { popu10: 67308, popu15: 61593, change: null },
  'å²©æ‰‹çœŒ' =&gt; { popu10: 64637, popu15: 57619, change: null },  
</code></pre><p>ã“ã“ã§ä¸€ç•ªæœ€å¾Œã®closeã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¿½åŠ å®Ÿè£…ã•ã›ã‚‹</p>
<pre><code class="language-java:" data-lang="java:">rl.on('close', () =&gt; {
  for (const [key, value] of prefectureDataMap) {
    value.change = value.popu15 / value.popu10;
  }
  console.log(prefectureDataMap);
});  
</code></pre><p><strong>value.change = value.popu15 / value.popu10;ã“ã‚Œã§å‰²ã‚Šç®—ã‚’ã—ã¦ã‚‹</strong><br>
ã“ã‚Œã§å¤‰åŒ–ç‡ãŒå‡ºã¦ãã‚‹ã¯ãš</p>
<pre><code class="language-java:" data-lang="java:">Map {
  'åŒ—æµ·é“' =&gt; { popu10: 258530, popu15: 236840, change: 0.9161025799713767 },
  'é’æ£®çœŒ' =&gt; { popu10: 67308, popu15: 61593, change: 0.9150918167231236 },
  'å²©æ‰‹çœŒ' =&gt; { popu10: 64637, popu15: 57619, change: 0.8914244163559571 },
</code></pre><p>æœ€å¾Œã«ä¸¦ã³æ›¿ãˆ!<br>
app.jsã®closeéƒ¨åˆ†ã‚’æ›¸ãæ›ãˆ</p>
<pre><code class="language-java:" data-lang="java:"> rl.on('close', () =&gt; {
-  console.log(prefectureDataMap);
+  for (const [key, value] of prefectureDataMap) {
+    value.change = value.popu15 / value.popu10;
+  }
+  const rankingArray = Array.from(prefectureDataMap).sort((pair1, pair2) =&gt; {
+    return pair2[1].change - pair1[1].change;
+  });
+  console.log(rankingArray);
 });  
</code></pre><p>(ï¼‹ãŒè¿½åŠ ã€âˆ’ãŒå‰Šé™¤)<br>
ã“ã‚Œã§æœ€å¾Œâ€¦</p>
<pre><code class="language-java:" data-lang="java:">[ [ 'æ„›çŸ¥çœŒ',
 { popu10: 361670, popu15: 371756, change: 1.0278873005778748 } ],
[ 'å¤§é˜ªåºœ',
 { popu10: 416930, popu15: 426504, change: 1.0229630873288083 } ],
[ 'å¯Œå±±çœŒ',
 { popu10: 47585, popu15: 48442, change: 1.0180098770620993 } ],
[ 'ç¥å¥ˆå·çœŒ',
 { popu10: 421017, popu15: 426358, change: 1.0126859485483959 } ],  
</code></pre><p>ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãŒã“ã‚Œã§ã§ããŸ!!ã‚ã¨ã¯ç¶ºéº—ã«è¡¨ç¤ºã•ã›ã‚‹ã¨ã‹è‰²ã€…æ§‹æ–‡ã®ä¸­å¼„ã£ã¦ã¿ã¦ã‚‚è‰¯ã•ãã†</p>
<h3 id="ãŠã¾ã‘">ãŠã¾ã‘</h3>
<p>ç¶ºéº—ã«å‡ºåŠ›ã•ã›ã¦ã¿ã‚‹<br>
app.jsã‚’æ›¸ãæ›ãˆã¦ã¿ã‚‹ (ä¸‹éƒ¨åˆ†ã®closeéƒ¨åˆ†ã®ã¿)</p>
<pre><code class="language-java:" data-lang="java:"> rl.on('close', () =&gt; {
   for (const [key, value] of prefectureDataMap) {
     value.change = value.popu15 / value.popu10;
   }
   const rankingArray = Array.from(prefectureDataMap).sort((pair1, pair2) =&gt; {
     return pair2[1].change - pair1[1].change;
   });
-  console.log(rankingArray);
+  const rankingStrings = rankingArray.map(([key, value]) =&gt; {
+    return (
+      key +
+      ': ' +
+      value.popu10 +
+      '=&gt;' +
+      value.popu15 +
+      ' å¤‰åŒ–ç‡:' +
+      value.change
+    );
+  });
+  console.log(rankingStrings);
 });  
</code></pre><p>è¿½åŠ éƒ¨åˆ†ã§è¦‹ã‚„ã™ã•ãŒè¿½åŠ ã•ã‚Œã¦ã‚‹æ„Ÿã˜<br>
ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›</p>
<pre><code class="language-java:" data-lang="java:">node app.js  
</code></pre><p>ã™ã‚‹ã¨â€¦</p>
<pre><code class="language-java:" data-lang="java:">[ 'æ„›çŸ¥çœŒ: 361670=&gt;371756 å¤‰åŒ–ç‡:1.0278873005778748',
'å¤§é˜ªåºœ: 416930=&gt;426504 å¤‰åŒ–ç‡:1.0229630873288083',
'å¯Œå±±çœŒ: 47585=&gt;48442 å¤‰åŒ–ç‡:1.0180098770620993',
'ç¥å¥ˆå·çœŒ: 421017=&gt;426358 å¤‰åŒ–ç‡:1.0126859485483959',  
</code></pre><p>ã„ã„æ„Ÿã˜ã€‚ğŸ‘<br>
æœ€å¾Œã®æœ€å¾Œâ€¦<br>
å¢—æ¸›ç‡ã‚’è©¦ãã†<br>
app.jsã‚’å¼„ã£ã¦ã¿ã‚ˆã†(closeéƒ¨åˆ†ã‚’ç­†è€…ã‚ªãƒªã‚¸ãƒŠãƒ«ã§å¼„ã£ã¦ã¿ãŸ)</p>
<pre><code class="language-java:" data-lang="java:">rl.on('close', () =&gt; {
    for (const [key, value] of prefectureDataMap) {
        //{(2015ã®äººå£Ã·2010ã®äººå£)-1}Ã—100ã‚’è¡¨ã™//
            value.change = ((value.popu15 / value.popu10)-1)*100;
          }
          const rankingArray = Array.from(prefectureDataMap).sort((pair1, pair2) =&gt; {
            return pair2[1].change - pair1[1].change;
          });
          //console.log(rankingArray);//
          const rankingStrings = rankingArray.map(([key, value]) =&gt; {
                return (
                  key +
                  ': ' +
                  value.popu10 +
                  '=&gt;' +
                  value.popu15 +
                  ' å¤‰åŒ–ç‡:' +
                  value.change +
                  //%å˜ä½ã§å°å‡º//
                  ' % '
                );
              });
              console.log(rankingStrings);
        });  
        ```  
```java:  
[
  'æ„›çŸ¥çœŒ: 361670=&gt;371756 å¤‰åŒ–ç‡:2.7887300577874807 % ',
  'å¤§é˜ªåºœ: 416930=&gt;426504 å¤‰åŒ–ç‡:2.296308732880825 % ',
  'å¯Œå±±çœŒ: 47585=&gt;48442 å¤‰åŒ–ç‡:1.8009877062099333 % ',
  'ç¥å¥ˆå·çœŒ: 421017=&gt;426358 å¤‰åŒ–ç‡:1.2685948548395887 % ',
  'æ»‹è³€çœŒ: 72773=&gt;73562 å¤‰åŒ–ç‡:1.0841933134541737 % ',
  'é¦™å·çœŒ: 43947=&gt;44342 å¤‰åŒ–ç‡:0.8988099301431296 % ',
  'å²é˜œçœŒ: 101669=&gt;101755 å¤‰åŒ–ç‡:0.0845882225653849 % ',
  'å…µåº«çœŒ: 268710=&gt;268336 å¤‰åŒ–ç‡:-0.13918350638234545 % ',
  'é•·é‡çœŒ: 98872=&gt;98617 å¤‰åŒ–ç‡:-0.25790921595598704 % ',
  'é™å²¡çœŒ: 169029=&gt;168579 å¤‰åŒ–ç‡:-0.26622650551089144 % ',  
  (ä»¥ä¸‹ç•¥)  
</code></pre><p>ã“ã‚Œã§ã‚„ã‚ŠãŸã„ã“ã¨ãŒã§ããŸ!<br>
æº€è¶³</p>
</div>
    <div class="post-footer">
      <div class="info">
        

        
      </div>
    </div>

    
  </div>


          </div>
        </div>
      </main>
    </div><footer class="footer footer--base">
  <div class="by_farbox">
    <ul class="footer__list">
      <li class="footer__item">
        &copy;
        
          2020-2021

        
      </li>
      
    </ul>
  </div>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.71100d84fab0ad794b8399a66ac810700cc78d703f715dc10af4d7ba7b761362.js"
    integrity="sha256-cRANhPqwrXlLg5mmasgQcAzHjXA/cV3BCvTXunt2E2I="
    crossorigin="anonymous"
  ></script></body>
</html>
